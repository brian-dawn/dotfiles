#!/usr/bin/env python

import os

#################################
# Create symlinks to this repo. #
#################################

# Assuming we are in dotfiles/bin.
script_dir = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
home_dir   = os.path.expanduser('~')
script_name = os.path.basename(__file__)

links_to_make = [f for f in os.listdir(script_dir) if not f[0] == '.']

target = [os.path.join(home_dir, '.' + f) for f in links_to_make]
source = [os.path.join(script_dir, f) for f in links_to_make]

for t, s in zip(target, source):
    try:
        os.symlink(os.path.relpath(s, home_dir), t)
        print(os.path.relpath(s, home_dir), '->', t)
    except:
        pass

# Install necessary tools.
print("Installing tools")

# Tmux pkg manager
os.system('git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm')

# Install emacs pkg management
os.system('curl -fsSL https://raw.githubusercontent.com/cask/cask/master/go | python')

# Install vim pkg management
os.system('curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim')

# Install fish shell pkg management
os.system('curl -L https://github.com/oh-my-fish/oh-my-fish/raw/master/bin/install | fish')

